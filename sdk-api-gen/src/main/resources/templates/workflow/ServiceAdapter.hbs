{{#if originalClassPkg}}package {{originalClassPkg}};{{/if}}

public class {{generatedClassSimpleName}} implements dev.restate.sdk.common.ServiceAdapter<{{originalClassFqcn}}> {

    public static final String SERVICE_NAME = "{{fqsn}}";

    @java.lang.Override
    public dev.restate.sdk.workflow.impl.WorkflowServicesBundle adapt({{originalClassFqcn}} service) {
        return dev.restate.sdk.workflow.impl.WorkflowServicesBundle.named(
            SERVICE_NAME,
            {{#methods}}{{#if isWorkflow}}
            dev.restate.sdk.workflow.impl.WorkflowServicesBundle.MethodSignature.of("{{name}}", {{{inputSerdeDecl}}}, {{{outputSerdeDecl}}}),
            (ctx, req) -> {
            {{#if outputEmpty}}
                {{#if inputEmpty}}service.{{name}}(ctx){{else}}service.{{name}}(ctx, req){{/if}};
                return null;
            {{else}}
                return {{#if inputEmpty}}service.{{name}}(ctx){{else}}service.{{name}}(ctx, req){{/if}};
            {{/if}}
            }
            {{/if}}{{/methods}})
            {{#methods}}{{#if isShared}}
            .with{{capitalizeFirst (lower methodType)}}(
            dev.restate.sdk.workflow.impl.WorkflowServicesBundle.MethodSignature.of("{{name}}", {{{inputSerdeDecl}}}, {{{outputSerdeDecl}}}),
            (ctx, req) -> {
                {{#if outputEmpty}}
                {{#if inputEmpty}}service.{{name}}(ctx){{else}}service.{{name}}(ctx, req){{/if}};
                return null;
                {{else}}
                return {{#if inputEmpty}}service.{{name}}(ctx){{else}}service.{{name}}(ctx, req){{/if}};
                {{/if}}
            })
            {{/if}}{{/methods}}
            .build();
    }

    @java.lang.Override
    public boolean supportsObject(Object serviceObject) {
        return serviceObject instanceof {{originalClassFqcn}};
    }

}