{{#if packageName}}package {{packageName}};{{/if}}

public class {{className}}ServiceAdapter implements dev.restate.sdk.common.ServiceAdapter<{{fqcn}}> {

    public static final String SERVICE_NAME = "{{fqcn}}";

    @java.lang.Override
    public dev.restate.sdk.dynrpc.DynService adapt({{fqcn}} service) {
        return dev.restate.sdk.dynrpc.DynService.{{lower serviceType}}(SERVICE_NAME)
            {{#methods}}
            .with{{#if ../isObject}}{{capitalizeFirst (lower methodType)}}{{/if}}(
            dev.restate.sdk.dynrpc.DynService.MethodSignature.of("{{name}}", {{{inputSerdeDecl}}}, {{{outputSerdeDecl}}}),
            (ctx, req) -> {
                {{#if outputEmpty}}
                {{#if inputEmpty}}service.{{name}}(ctx){{else}}service.{{name}}(ctx, req){{/if}};
                return null;
                {{else}}
                return {{#if inputEmpty}}service.{{name}}(ctx){{else}}service.{{name}}(ctx, req){{/if}};
                {{/if}}
            })
            {{/methods}}
            .build();
    }

}